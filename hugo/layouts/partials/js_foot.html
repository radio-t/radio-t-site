{{ if or (eq .URL "/") (eq (substr .URL 0 3) "/p/") }}
<script>
    var remark_config = {
      site_id: '{{ .Site.Params.remark42 }}',
      page_title: document.title,
    };

  (function() {
    var d = document, s = d.createElement('script');
    var baseurl = 'https://remark42.radio-t.com';

    {{ if eq .URL "/" }}
    s.src = baseurl + '/web/counter.js';
    {{ else if eq (substr .URL 0 3) "/p/" }}
    s.src = baseurl + '/web/embed.js';
    {{ end }}

    s.type = 'text/javascript';
    (d.head || d.body).appendChild(s);
  })();
</script>
{{ end }}

<script type="text/javascript">
  (function(){
    var twitterWidgets = document.createElement('script');
    twitterWidgets.type = 'text/javascript';
    twitterWidgets.async = true;
    twitterWidgets.src = '//platform.twitter.com/widgets.js';
    document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
  })();
</script>

<script>
  // Check that service workers are registered
  if ('serviceWorker' in navigator) {
    // Use the window load event to keep the page load performant
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/sw.js');
    });
  }
</script>
